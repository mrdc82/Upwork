



python - How to write to a CSV line by line? - Stack Overflow



































 
 


Skip to main content






Stack Overflow



About



						Products
					


OverflowAI







Stack Overflow for Teams
Where developers & technologists share private knowledge with coworkers




Advertising & Talent
Reach devs & technologists worldwide about your product, service or employer brand




OverflowAI
GenAI features for Teams




OverflowAPI
Train & fine-tune LLMs




Labs
The future of collective knowledge sharing



About the company
Visit the blog












Loading…















current community
















            Stack Overflow
        



help
chat









            Meta Stack Overflow
        






your communities            



Sign up or log in to customize your list.                


more stack exchange communities

company blog








Log in

Sign up

















 Home






 Questions






 Tags







 Users






 Companies





Labs








 Jobs






 Discussions






Collectives








                                        Communities for your favorite technologies.  Explore all Collectives





Teams



            Ask questions, find answers and collaborate at work with Stack Overflow for Teams.
        
Explore Teams
Create a free Team




Teams







            Ask questions, find answers and collaborate at work with Stack Overflow for Teams.
            Explore Teams









Collectives™ on Stack Overflow
Find centralized, trusted content and collaborate around the technologies you use most.

                    Learn more about Collectives
                





Teams
Q&A for work
Connect and share knowledge within a single location that is structured and easy to search.

                    Learn more about Teams
                








Get early access and see previews of new features.
 Learn more about Labs







How to write to a CSV line by line?



        Ask Question
    





Asked
8 years, 1 month ago


Modified
1 year, 3 months ago


Viewed
                        510k times
                    

















            138
        













I have data which is being accessed via http request and is sent back by the server in a comma separated format, I have the following code :
site= 'www.example.com'
hdr = {'User-Agent': 'Mozilla/5.0'}
req = urllib2.Request(site,headers=hdr)
page = urllib2.urlopen(req)
soup = BeautifulSoup(page)
soup = soup.get_text()
text=str(soup)

The content of text is as follows:
april,2,5,7
may,3,5,8
june,4,7,3
july,5,6,9

How can I save this data into a CSV file.
I know I can do something along the lines of the following to iterate line by line:
import StringIO
s = StringIO.StringIO(text)
for line in s:

But i'm unsure how to now properly write each line to CSV
EDIT---> Thanks for the feedback as suggested the solution was rather simple and can be seen below.
Solution:
import StringIO
s = StringIO.StringIO(text)
with open('fileName.csv', 'w') as f:
    for line in s:
        f.write(line)





pythonstringfilecsvio









Share


Improve this question



                        Follow
                        










edited Dec 15, 2020 at 22:36






martineau

122k2929 gold badges176176 silver badges307307 bronze badges








            asked May 18, 2016 at 3:48






Mustard TigerMustard Tiger

3,61199 gold badges4646 silver badges7171 bronze badges







4






2




It's already a CSV, you just have to write each line to a file...

– icedwater


Commented
May 18, 2016 at 3:51







2




I'm not sure you even need the StringIO import, to be honest. Also, the solution as-is probably does not separate the lines, as f.write() does not append newlines automatically.

– icedwater


Commented
May 18, 2016 at 7:48







1




@icedwater I understand what your saying, but I ran the code above and it was able to properly store the data to a csv file.

– Mustard Tiger


Commented
May 18, 2016 at 16:10







1




See also: How do I read and write CSV files with Python?

– Martin Thoma


Commented
Jan 5, 2018 at 9:37







Add a comment
 | 















                                        6 Answers
                                    6






            Sorted by:
        

            Reset to default
        




                        Highest score (default)
                    

                        Trending (recent votes count more)
                    

                        Date modified (newest first)
                    

                        Date created (oldest first)
                    
















            240
        


















General way:
##text=List of strings to be written to file
with open('csvfile.csv','wb') as file:
    for line in text:
        file.write(line)
        file.write('\n')

OR
Using CSV writer :
import csv
with open(<path to output_csv>, "wb") as csv_file:
        writer = csv.writer(csv_file, delimiter=',')
        for line in data:
            writer.writerow(line)

OR
Simplest way:
f = open('csvfile.csv','w')
f.write('hi there\n') #Give your csv text here.
## Python will convert \n to os.linesep
f.close()









Share


Improve this answer



                        Follow
                        










edited Nov 27, 2018 at 15:50






gsamaras

73k4646 gold badges200200 silver badges321321 bronze badges








            answered May 18, 2016 at 4:05






Ani MenonAni Menon

27.9k1616 gold badges109109 silver badges127127 bronze badges







5






26




for python 3, change it to with open(<path to output_csv>, "w", newline='') as csv_file:

– Khaled Hamed


Commented
Jul 18, 2018 at 10:33







3




Missing information on this line for line in data:. Please fix that. Thank you.

– Francisco Maria Calisto


Commented
Oct 1, 2018 at 19:38







1




how to append a line, if there is already something in the csv-file, using the third solution?

– Jürgen K.


Commented
Sep 12, 2019 at 13:32










7




@JürgenK. Use 'a'(append mode) in place of 'w'(write mode).

– Ani Menon


Commented
Sep 19, 2019 at 4:12











If you're getting the error: TypeError: a bytes-like object is required, not 'str', just change the 'wb' to 'w' in the open() function.

– tsveti_iko


Commented
Sep 29, 2020 at 13:09










Add a comment
 | 



















            20
        


















You could just write to the file as you would write any normal file.
with open('csvfile.csv','wb') as file:
    for l in text:
        file.write(l)
        file.write('\n')

If just in case, it is a list of lists, you could directly use built-in csv module
import csv

with open("csvfile.csv", "wb") as file:
    writer = csv.writer(file)
    writer.writerows(text)









Share


Improve this answer



                        Follow
                        










            answered May 18, 2016 at 3:59






VishwaVishwa

1,53522 gold badges1313 silver badges2626 bronze badges














Add a comment
 | 















            13
        


















I would simply write each line to a file, since it's already in a CSV format:
write_file = "output.csv"
with open(write_file, "wt", encoding="utf-8") as output:
    for line in text:
        output.write(line + '\n')

I can't recall how to write lines with line-breaks at the moment, though :p
Also, you might like to take a look at this answer about write(), writelines(), and '\n'.








Share


Improve this answer



                        Follow
                        










edited Oct 5, 2021 at 2:48














            answered May 18, 2016 at 3:55






icedwatericedwater

4,81033 gold badges3636 silver badges5151 bronze badges







1






1




also care about encoding like this open(write_file, 'wt', encoding='utf-8')

– Bellash


Commented
Sep 28, 2021 at 19:44







Add a comment
 | 



















            9
        


















In addition to the previous answers, I created a class for quickly writing to CSV files. This approach simplifies the management and closure of open files, as well as ensures consistency and cleaner code, especially when dealing with multiple files.
class CSVWriter():

    filename = None
    fp = None
    writer = None

    def __init__(self, filename):
        self.filename = filename
        self.fp = open(self.filename, 'w', encoding='utf8')
        self.writer = csv.writer(self.fp, delimiter=';', quotechar='"', quoting=csv.QUOTE_ALL, lineterminator='\n')

    def close(self):
        self.fp.close()

    def write(self, *args):
        self.writer.writerow(args)

    def size(self):
        return os.path.getsize(self.filename)

    def fname(self):
        return self.filename

Example usage:
mycsv = CSVWriter('/tmp/test.csv')
mycsv.write(12,'green','apples')
mycsv.write(7,'yellow','bananas')
mycsv.close()
print("Written %d bytes to %s" % (mycsv.size(), mycsv.fname()))

Have fun








Share


Improve this answer



                        Follow
                        










edited Mar 26, 2023 at 17:39






Andreas Violaris

3,71055 gold badges1919 silver badges3434 bronze badges








            answered Sep 20, 2019 at 2:13






jrmjrm

59966 silver badges1212 bronze badges







0






Add a comment
 | 















            2
        


















What about this:
with open("your_csv_file.csv", "w") as f:
    f.write("\n".join(text))


str.join() Return a string which is the concatenation of the strings in iterable.
  The separator between elements is
  the string providing this method.









Share


Improve this answer



                        Follow
                        










            answered Sep 20, 2018 at 20:43






Vlad BezdenVlad Bezden

87.7k2626 gold badges254254 silver badges187187 bronze badges














Add a comment
 | 















            0
        


















In my situation...
  with open('UPRN.csv', 'w', newline='') as out_file:
    writer = csv.writer(out_file)
    writer.writerow(('Name', 'UPRN','ADMIN_AREA','TOWN','STREET','NAME_NUMBER'))
    writer.writerows(lines)

you need to include the newline option in the open attribute and it will work
https://www.programiz.com/python-programming/writing-csv-files








Share


Improve this answer



                        Follow
                        










            answered Sep 12, 2022 at 13:07






GeographosGeographos

1,28422 gold badges3131 silver badges7272 bronze badges














Add a comment
 | 











                                    Your Answer
                                








Reminder: Answers generated by artificial intelligence tools are not allowed on Stack Overflow. Learn more














Thanks for contributing an answer to Stack Overflow!Please be sure to answer the question. Provide details and share your research!But avoid …Asking for help, clarification, or responding to other answers.Making statements based on opinion; back them up with references or personal experience.To learn more, see our tips on writing great answers.






Draft saved
Draft discarded












Sign up or log in


 Sign up using Google
                        

 Sign up using Email and Password
                        



Submit

Post as a guest


Name









Email
Required, but never shown












Post as a guest


Name









Email
Required, but never shown











                                            Post Your Answer
                                        

                                            Discard
                                        

                                                By clicking “Post Your Answer”, you agree to our terms of service and acknowledge you have read our privacy policy.






Not the answer you're looking for? Browse other questions tagged pythonstringfilecsvio or ask your own question.                                







                            Featured on Meta
                        


 

We spent a sprint addressing your requests — here’s how it went




 

Upcoming initiatives on Stack Overflow and across the Stack Exchange network...




 

The [lib] tag is being burninated




 

What makes a homepage useful for logged-in users












 
Linked



-1

Save python output as csv



-3

How do I write the data from Scapy into a CSV file



1

Save Python Variable values to CSV file



-1

How can I export this web-scripped data into a csv file?



-2

parentheses and comma formatting to csv columns



1

Exporting Python to Excel is only showing one row of data



159

write() versus writelines() and concatenated strings



102

How do I read and write CSV files?



4

Python CSV writer automatically limit rows per file and create new files



2

Combine and print different variables on one line


See more linked questions




Related



7173

How do I check whether a file exists without exceptions?



4740

How do I read / convert an InputStream into a String in Java?



7406

How to check whether a string contains a substring in JavaScript?



6329

How do I include a JavaScript file in another JavaScript file?



5257

How do I make the first letter of a string uppercase in JavaScript?



5472

How do I replace all occurrences of a string in JavaScript?



2023

How to read a file line-by-line into a list?



6980

How do I merge two dictionaries in a single expression in Python?



3853

How to catch multiple exceptions in one line? (in the "except" block)



3830

How to copy files







            Hot Network Questions
        




                    Beginner level password generator optimization
                



                    How do we define addition?
                



                    Where can I find a complete archive of audio recordings of Hitler speeches?
                



                    Can I convert 50 amp electric oven circuit to subpanel, and power oven plus water heater, plus maybe a car charger?
                



                    Why the number of bits or bytes is different for a folder that has been copied between two external drives?
                



                    What makes Python better suited to quant finance than Matlab / Octave, Julia, R and others?
                



                    Is "sinnate" a word? What does it mean?
                



                    Is a desert planet with a small habitable area possible?
                



                    The reading of the Ethiopian eunuch conversion story without Acts 8:37
                



                    If Biden steps back or is replaced, until when must he do it?
                



                    How can I export my Location History now that this data is only stored locally on the phone?
                



                    How can one apply to graduate school if their undergraduate university is uncooperative in providing the required information?
                



                    If the alien nest was under the primary heat exchangers, why didn't the marines just blow them up or turn them off so they freeze?
                



                    Are all subcorrespondences of the weak Pareto correspondence monotonic at the unrestricted domain of linear orders?
                



                    Any alternative to lockdown browser?
                



                    'adb help' for 'root' says "restart adbd with root permissions", but 'adb root' says "adbd cannot run as root in production builds"
                



                    Why are responses to an attack in a cycling race immediate?
                



                    Why does black have a higher win rate here?
                



                    How to POSIX-ly ignore "warning: command substitution: ignored null byte in input"?
                



                    Newbie trying to write a simple script to automate command
                



                    Joint brokerage account legalities re: dividend, stock losses
                



                    Best way for a Solar martial artist to block lethal damage barehanded?
                



                    向こう as a pronoun ("he/she/they")?
                



                    11 trees in 6 rows with 4 trees in each row
                



            more hot questions
        




            Question feed
        




                Subscribe to RSS
            



                        Question feed
                        To subscribe to this RSS feed, copy and paste this URL into your RSS reader.















lang-py











Stack Overflow

Questions
Help
Chat



Products

Teams
Advertising
Collectives
Talent



Company

About
Press
Work Here
Legal
Privacy Policy
Terms of Service
Contact Us
Cookie Settings
Cookie Policy




Stack Exchange Network



                                    Technology
                                



                                    Culture & recreation
                                



                                    Life & arts
                                



                                    Science
                                



                                    Professional
                                



                                    Business
                                



                                    API
                                



                                    Data
                                







Blog
Facebook
Twitter
LinkedIn
Instagram


Site design / logo © 2024 Stack Exchange Inc; user contributions licensed under CC BY-SA.                    rev 2024.7.4.11976












